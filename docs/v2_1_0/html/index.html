<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="tr">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Görevci by Kozmotronik: Görevci Belgelendirmesi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="gorevci_logo_96.png"/></td>
  <td id="projectalign">
   <div id="projectname">Görevci by Kozmotronik<span id="projectnumber">&#160;v2.1.0</span>
   </div>
   <div id="projectbrief">Küçük gömülü sistemler için çoklu görev (multi-tasking) yönetimi uygulaması</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Oluşturan Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Ara');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Yüklüyor...</div>
<div class="SRStatus" id="Searching">Arıyor...</div>
<div class="SRStatus" id="NoMatches">Eşleşme Yok</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Görevci Belgelendirmesi </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Yazar</dt><dd>İsmail Sahillioğlu (Kozmotronik) </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd><a class="el" href="lisans.html">MIT Lisansı</a></dd></dl>
<div class="image">
<img src="gorevci-docs.png" alt=""/>
</div>
<h3><a class="anchor" id="autotoc_md0"></a>
Görevciyi Edinme</h3>
<p>Görevciyi edinmenin en kolay yolu, Görevciyi Githubdan clon etmek, sonra (varsa) uygulamak istediğiniz portun örnek projesini açıp gerekli değişiklikleri yaparak kullanmaktır. Alternatif olarak kaynak kodunu doğrudan indirip elle projenize dahil edebilirsiniz.</p>
<h3><a class="anchor" id="autotoc_md1"></a>
Kip Seçimi</h3>
<p>Görevci iki farklı kipte kullanılabilir:</p>
<ul>
<li>Hafif kip</li>
<li>Normal kip</li>
</ul>
<p>Kip, projeye eklenecek <em>gorevciypl.h</em> adında bir başlık dosyası içerisinde <code>grvCALISMA_KIPI</code> tanımlanarak seçilir. <code>grvCALISMA_KIPI</code> 0 olarak tanımlanırsa Görevci <em>Hafif kip</em>, 1 olarak tanımlanırsa <em>Normal kip</em> için yapılandırılacaktır. Kip olarak <em>Hafif kip</em> kullanıldığı durumda programcı, <code>main</code> işlevi içinde görev yönetimini kendisi yapar. Her iki kipin kullanımı port demolarında örneklendirilecektir.</p>
<h3><a class="anchor" id="autotoc_md2"></a>
Görevler Oluşturma</h3>
<p>Bir görevin normal bir C işlevinden pek bir farkı yoktur, yalnızca biraz daha yapılandırılmıştır ve sürekli çalışması gereken görevler içlerinde bir sonsuz döngü içerir. Bir görevin temel yapısı şu şekilde olmalıdır: <br  />
</p>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> gorev(<a class="code hl_typedef" href="group__gorev.html#gabaf8d82ca67804daf3abb5fd69724865">gorevTutucu_t</a> tutucu) {</div>
<div class="line">    <span class="comment">// Görev kapsamında (scope) kullanılacak değişkenler burada tanımlanabilir.</span></div>
<div class="line">    <span class="comment">// Değerini koruması gereken değişkenler &quot;static&quot; niteleyicisiyle</span></div>
<div class="line">    <span class="comment">// tanımlanmalıdır.</span></div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">char</span> karakter;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Bir görev ana görev döngüsünden hemen önce her zaman görev yapısına</span></div>
<div class="line">    <span class="comment">// başvuru olarak parametre alan grvBASLA() ile başlamalıdır.</span></div>
<div class="line">    <a class="code hl_define" href="group__gorev.html#ga301d663c80bfa01f9af9b8bd741df7ce">grvBASLA</a>(tutucu);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Buraya bir kereye mahsus çalışacak kodlar. Örneğin bir giriş - çıkış</span></div>
<div class="line">    <span class="comment">// portunu ilkleme veya bir analog ucunu ilkleme kodları gibi. Buradaki</span></div>
<div class="line">    <span class="comment">// kodlar görevin yaşam süresi boyunca yalnızca bir kez çalışacağı için</span></div>
<div class="line">    <span class="comment">// ilklendirme işlemlerini yapmak için idealdir.</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Bu döngü bir görev bloğunun ana döngüsüdür. for(;;) biçiminde de</span></div>
<div class="line">    <span class="comment">// yazılabilir. Burada sonsuz döngüde kalmalı, kesinlikle break veya return</span></div>
<div class="line">    <span class="comment">// ile döngüden çıkılmamalıdır.</span></div>
<div class="line">    <span class="keywordflow">while</span>(1) {</div>
<div class="line">        <span class="comment">// Buraya görev kodları ve bloklayıcı API çağrıları</span></div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Tüm görev işlevleri görev yapısına başvuru olarak parametre alan</span></div>
<div class="line">    <span class="comment">// grvBITIR() ile sonlanmalıdır. Akış sonsuz döngüden buraya gelmesi</span></div>
<div class="line">    <span class="comment">// görevin bir daha çalışmamasına neden olabilir.</span></div>
<div class="line">    <a class="code hl_define" href="group__gorev.html#ga5e1101c8d5a7cbafeb1a665231457e0b">grvBITIR</a>(tutucu);</div>
<div class="line">}</div>
<div class="ttc" id="agroup__gorev_html_ga301d663c80bfa01f9af9b8bd741df7ce"><div class="ttname"><a href="group__gorev.html#ga301d663c80bfa01f9af9b8bd741df7ce">grvBASLA</a></div><div class="ttdeci">#define grvBASLA(g)</div><div class="ttdef"><b>Definition:</b> gorev.h:187</div></div>
<div class="ttc" id="agroup__gorev_html_ga5e1101c8d5a7cbafeb1a665231457e0b"><div class="ttname"><a href="group__gorev.html#ga5e1101c8d5a7cbafeb1a665231457e0b">grvBITIR</a></div><div class="ttdeci">#define grvBITIR(g)</div><div class="ttdef"><b>Definition:</b> gorev.h:206</div></div>
<div class="ttc" id="agroup__gorev_html_gabaf8d82ca67804daf3abb5fd69724865"><div class="ttname"><a href="group__gorev.html#gabaf8d82ca67804daf3abb5fd69724865">gorevTutucu_t</a></div><div class="ttdeci">void * gorevTutucu_t</div><div class="ttdoc">Görevin işlevinin kendisine referansı (handle for function).</div><div class="ttdef"><b>Definition:</b> gorev.h:100</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3"></a>
Görevleri Yönetme</h3>
<p>Bir görevin bir olay beklemesi ya da gecikmesi gerekiyorsa CPU' yu boşuna meşgul etmemek, gerektiğinde beklemesi gereken görevi bloklayıp çalışmaya hazır başka bir görevin çalışmasını sağlamak Görevcinin temel amaçlarındandır. Ancak bu mekanizmanın düzgün bir şekilde işlemesi için görev bloğu içerisinde, klasik super-loop veya state-machine programlama mantığında kullanılan <code>return</code> ve <code>break</code> gibi dönüş ve döngü kırma komutları kesinlikle kullanılmamalıdır. Böyle yapmak görevin düzgün ve beklendiği gibi çalışmamasına neden olur. Bunun yerine aşağıdaki örnek durumlara uygun düşen API' ler kullanılmalıdır.</p>
<h4><a class="anchor" id="autotoc_md4"></a>
Bir görevi geciktirme</h4>
<ul>
<li><code><a class="el" href="group__gorev.html#ga4de2aa64917cc36fe2d09ccc5cd127dd">grvGECIK_MS()</a></code> - <em>işletim sistemlerinde <code>sleep()</code> işlevlerine benzer</em></li>
<li><code><a class="el" href="group__gorev.html#gad9d291b9b9e3ad08dd131e20e6a9b844">grvKOSULLU_GECIK_MS()</a></code> - <em>işletim sistemlerinde <code>sleep()</code> işlevlerine benzer</em></li>
</ul>
<h4><a class="anchor" id="autotoc_md5"></a>
Bir koşul veya olayın beklenmesi</h4>
<ul>
<li><code><a class="el" href="group__gorev.html#gab4cac320995ff279ba03b2ab76cdf941">grvKOSUL_BEKLE()</a></code></li>
<li><code><a class="el" href="group__gorev.html#ga021f4574f2088ddc91fb23ef489dac4d">grvBU_KOSULDA_BEKLE()</a></code></li>
</ul>
<h4><a class="anchor" id="autotoc_md6"></a>
Verilere erişimde senkronizasyon</h4>
<ul>
<li><code><a class="el" href="group__bayrak.html#ga9d10fcc1de665b11cb101f712123444c">grvBAYRAK_BEKLE()</a></code> - <em>işletim sistemlerindeki <code>wait()</code> işlevlerine benzer</em></li>
<li><code><a class="el" href="group__bayrak.html#ga3368fe00225427f44a7696df146d6361">grvBAYRAK_IMLE()</a></code> - <em>işletim sistemlerindeki <code>signal()</code> işlevlerine benzer</em></li>
</ul>
<h4><a class="anchor" id="autotoc_md7"></a>
CPU kontrolünden gönüllü olarak vazgeçme</h4>
<p>Bazen bir görev kendi isteğiyle kontrolü çalışmak için bekleyen başka bir göreve vermek isteyebilir. Böyle bir durumda:</p><ul>
<li><code><a class="el" href="group__gorev.html#ga289c5d903ded3be14b99f5d1465ba883">grvVAZGEC()</a></code> - <em>işletim sistemlerindeki <code>yield()</code> işlevlerine benzer</em></li>
<li><code><a class="el" href="group__gorev.html#ga847890063512c9f96597eb74eadfe049">grvKOSULA_DEK_VAZGEC()</a></code> </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Oluşturan <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
